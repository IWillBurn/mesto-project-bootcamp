<!DOCTYPE html>
<html lang="ru">
<head>
  <link rel="stylesheet" href="./pages/index.css">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Место</title>
</head>
<body>
    <div class="page">
        <header class="header">
            <img class="header__logo" alt="Логотип" src="./images/header-logo.svg">
        </header>
        <main class="content">
            <section class="profile">
                <div class="profile__card">
                    <img class="profile__avatar" alt="Аватар" src="./images/profile-avatar.png">
                    <div class="profile__info">
                        <div class="profile__info-main">
                            <h1 class="profile__name">Жак-Ив Кусто</h1>
                            <button class="profile__edit-button" type="button"></button>
                        </div>
                        <p class="profile__about-me">Исследователь океана</p>
                    </div>
                </div>
                <button class="profile__add-button" type="button"></button>
            </section>
            <section class="elements">
                <template id="card-template">
                    <div class="elements__element">
                        <img class="elements__element-image">
                        <div class="elements__element-trash"></div>
                        <div class="elements__element-text">
                            <h2 class="elements__element-title"></h2>
                            <button class="elements__element-like" type="button"></button>
                        </div>
                    </div>
                </template>
                <script>
                    const initialCards = [
                        {
                            name: "Архыз",
                            link: "https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"
                        },
                        {
                            name: "Челябинская область",
                            link: "https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"
                        },
                        {
                            name: "Иваново",
                            link: "https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"
                        },
                        {
                            name: "Камчатка",
                            link: "https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"
                        },
                        {
                            name: "Холмогорский район",
                            link: "https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"
                        },
                        {
                            name: "Байкал",
                            link: "https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"
                        }
                    ];
                    const cardTemplate = document.querySelector("#card-template").content;
                    const cards = document.querySelector(".elements");
                    initialCards.forEach((card) => {
                        const cardElement = cardTemplate.querySelector(".elements__element").cloneNode(true);
                        cardElement.querySelector(".elements__element-image").src = card.link;
                        cardElement.querySelector(".elements__element-image").alt = card.name;
                        cardElement.querySelector(".elements__element-title").textContent = card.name;
                        cards.append(cardElement);

                        const updateLikeStatus = () => {
                            if (cardElement.querySelector(".elements__element-like").classList.contains("elements__element-like_pressed")) {
                                cardElement.querySelector(".elements__element-like").classList.remove("elements__element-like_pressed");
                            }
                            else {
                                cardElement.querySelector(".elements__element-like").classList.add("elements__element-like_pressed");
                            }
                        }
                        cardElement.querySelector(".elements__element-like").addEventListener("click", updateLikeStatus);

                        const deleteCard = () => {
                            cardElement.remove();
                        };
                        cardElement.querySelector(".elements__element-trash").addEventListener("click", deleteCard);
                    })
                </script>
            </section>
        </main>
        <footer class="footer">
            <p class="footer__text">
                © 2023 Mesto Russia
            </p>
        </footer>
    </div>
    <div class="popup-image">
        <div class="popup-image__container">
            <img class="popup-image__image">
            <button class="popup-image__close-button" type="button"></button>
            <p class="popup-image__subtitle">Горный Алтай</p>
        </div>
    </div>
    <script>
        const elemets = document.querySelectorAll(".elements__element")
        elemets.forEach((element) => {
            const image = element.querySelector(".elements__element-image");
            const title = element.querySelector(".elements__element-title");
            image.addEventListener("click", () => {
                document.querySelector(".popup-image").classList.remove("popup-image_status_closed");
                document.querySelector(".popup-image").classList.add("popup-image_status_opened");
                document.querySelector(".popup-image__image").src = image.src;
                document.querySelector(".popup-image__image").alt = title.textContent;
                document.querySelector(".popup-image__subtitle").textContent = title.textContent;
            });
        });

        const closeImagePopup = () => {
            document.querySelector(".popup-image").classList.remove("popup-image_status_opened");
            document.querySelector(".popup-image").classList.add("popup-image_status_closed");
        }
        document.querySelector(".popup-image__close-button").addEventListener("click", closeImagePopup);

    </script>
    <div class="popup-profile">
        <div class="popup-profile__container">
            <h3 class="popup-profile__title">Редактировать профиль</h3>
            <form class="popup-profile__form" name="form-profile-changer">
                <input class="popup-profile__input input-animation" type="text" name="input-name" placeholder="Имя Фамилия">
                <input class="popup-profile__input input-animation" type="text" name="input-about-me" placeholder="О себе">
                <button class="popup-profile__save-button" type="submit">Сохранить</button>
            </form>
            <button class="popup-profile__close-button" type="button"></button>
        </div>
    </div>
    <script>
        const openProfilePopup = () => {
            document.querySelector(".popup-profile").classList.remove("popup-profile_status_closed");
            document.querySelector(".popup-profile").classList.add("popup-profile_status_opened");
            document.querySelector("input[name=input-name]").value = document.querySelector(".profile__name").textContent;
            document.querySelector("input[name=input-about-me]").value = document.querySelector(".profile__about-me").textContent;
        }
        document.querySelector(".profile__edit-button").addEventListener("click", openProfilePopup);

        const closeProfilePopup = () => {
            document.querySelector(".popup-profile").classList.remove("popup-profile_status_opened");
            document.querySelector(".popup-profile").classList.add("popup-profile_status_closed");
        }
        document.querySelector(".popup-profile__close-button").addEventListener("click", closeProfilePopup);

        function changeProfileFormSubmit(event) {
            event.preventDefault();
            document.querySelector(".profile__name").textContent = document.querySelector("input[name=input-name]").value;
            document.querySelector(".profile__about-me").textContent = document.querySelector("input[name=input-about-me]").value;
            closeProfilePopup();
        }
        document.querySelector(".popup-profile__form").addEventListener("submit", changeProfileFormSubmit);
    </script>
    <div class="popup-card">
        <div class="popup-card__container">
            <h3 class="popup-card__title">Новое место</h3>
            <form class="popup-card__form" name="form-card-changer">
                <input class="popup-card__input input-animation" type="text" name="input-card-name" placeholder="Название">
                <input class="popup-card__input input-animation" type="text" name="input-image-link" placeholder="Ссылка на картинку">
                <button class="popup-card__save-button" type="submit">Сохранить</button>
            </form>
            <button class="popup-card__close-button" type="button"></button>
        </div>
    </div>
    <script>
        const openCardPopup = () => {
            document.querySelector(".popup-card").classList.remove("popup-card_status_closed");
            document.querySelector(".popup-card").classList.add("popup-card_status_opened");
        }
        document.querySelector(".profile__add-button").addEventListener("click", openCardPopup);

        const closeCardPopup = () => {
            document.querySelector(".popup-card").classList.remove("popup-card_status_opened");
            document.querySelector(".popup-card").classList.add("popup-card_status_closed");
        }
        document.querySelector(".popup-card__close-button").addEventListener("click", closeCardPopup);

        function createCardFormSubmit(event) {
            event.preventDefault();
            const cardTemplate = document.querySelector("#card-template").content;
            const cards = document.querySelector(".elements");
            const cardElement = cardTemplate.querySelector(".elements__element").cloneNode(true);
            cardElement.querySelector(".elements__element-image").src = document.querySelector("input[name=input-image-link]").value;
            cardElement.querySelector(".elements__element-image").alt = document.querySelector("input[name=input-card-name]").value;
            cardElement.querySelector(".elements__element-title").textContent = document.querySelector("input[name=input-card-name]").value;
            cards.append(cardElement);

            const updateLikeStatus = () => {
                if (cardElement.querySelector(".elements__element-like").classList.contains("elements__element-like_pressed")) {
                    cardElement.querySelector(".elements__element-like").classList.remove("elements__element-like_pressed");
                }
                else {
                    cardElement.querySelector(".elements__element-like").classList.add("elements__element-like_pressed");
                }
            }
            cardElement.querySelector(".elements__element-like").addEventListener("click", updateLikeStatus);

            const image = cardElement.querySelector(".elements__element-image");
            const title = cardElement.querySelector(".elements__element-title");
            image.addEventListener("click", () => {
                document.querySelector(".popup-image").classList.add("popup-image_status_opened");
                document.querySelector(".popup-image").classList.remove("popup-image_status_closed");
                document.querySelector(".popup-image__image").src = image.src;
                document.querySelector(".popup-image__image").alt = title.textContent;
                document.querySelector(".popup-image__subtitle").textContent = title.textContent;
            });

            const deleteCard = () => {
                cardElement.remove()
            };
            cardElement.querySelector(".elements__element-trash").addEventListener("click", deleteCard)
            closeCardPopup();
        }
        document.querySelector(".popup-card__form").addEventListener("submit", createCardFormSubmit);
    </script>

</body>
</html>
